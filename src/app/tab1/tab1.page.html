<!-- Encabezado original de la página -->
<ion-header [translucent]="true">
  <ion-toolbar>
    <div class="header flex justify-between items-center px-4">
      <ion-title>GamePage</ion-title>
      <!-- -------------------- --->
      <!-- ----------------------- -->
    </div>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <!-- Banner de bienvenida -->
  <div class="bienvenida text-center p-6 bg-primary-lighter">
    <h1 class="text-2xl font-bold text-gray-800">¡Bienvenido a GamePage!</h1>
    <p class="text-sm text-gray-600">Descubre Post's de Videojuegos</p>
  </div>

  <!-- INDICADOR DE CARGA -->
  <!-- Solo se muestra si isLoading es true (mientras se espera la API) -->
  <div *ngIf="isLoading" class="flex justify-center items-center h-48">
    <ion-spinner name="crescent" color="primary"></ion-spinner>
    <p class="ml-3 text-primary">Cargando juegos populares...</p>
  </div>

  <!-- MENSAJE DE ERROR/NO JUEGOS -->
  <div *ngIf="!isLoading && juegos.length === 0" class="text-center p-8 text-gray-500">
    <p>No se pudieron cargar los juegos o la lista está vacía.</p>
  </div>

  <div class="categorias p-4 mt-6">
    <h2 class="text-xl font-bold mb-3">Categorías Populares</h2>
    <div class="lista-categorias flex flex-wrap gap-2">

      <!-- ⭐️ Iteramos sobre la lista 'categorias' del componente (Tab1Page) -->
      <!-- ⭐️ EVENTO CLICK: Llama a la función del componente con el slug y el nombre -->
      <!-- ⭐️ ESTILO DINÁMICO: Si el filtro activo coincide con el nombre del chip, se pone color 'primary' -->
      <ion-chip *ngFor="let cat of categorias" (click)="filtrarPorCategoria(cat.slug, cat.nombre)"
        [color]="filtroActivo === cat.nombre ? 'primary' : 'medium'" class="cursor-pointer">
        {{ cat.nombre }}
      </ion-chip>

    </div>
  </div>
  <!-- LISTADO DINÁMICO DE JUEGOS -->

  <!-- La sección solo se muestra si NO está cargando Y hay juegos en la lista -->
  <div *ngIf="!isLoading && juegos.length > 0"
    class="juegos-grid p-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">

    <!-- Iteramos sobre el array 'juegos' obtenido de la API -->
    <!-- RouterLink agregado para redirigir a otro tabs de acuerdo al id del juego-->
    <ion-card *ngFor="let juego of juegos" class="juegos-card shadow-lg rounded-lg overflow-hidden"
      [routerLink]="['/tabs/tab4',juego.id]">
      <!-- La imagen ahora viene de la propiedad background_image -->
      <img [src]="juego.background_image" [alt]="'Imagen de fondo de ' + juego.name" class="w-full h-48 object-cover" />

      <ion-card-header>
        <!-- El título viene de la propiedad name -->
        <ion-card-title class="text-lg font-semibold">{{ juego.name }}</ion-card-title>

        <!-- La puntuación viene de la propiedad rating -->
        <ion-card-subtitle class="text-sm text-yellow-500">
          ⭐ {{ juego.rating | number:'1.1-1' }}/5
          <span class="text-xs text-gray-500 ml-2">({{ juego.released }})</span>
        </ion-card-subtitle>
      </ion-card-header>

      <ion-card-content class="text-sm text-gray-600">
        <!-- Puedes añadir una descripción o un botón de ver más aquí -->
        <p>¡Descubre más sobre este título de {{ juego.released }}! Puntuación de la comunidad.</p>
      </ion-card-content>
    </ion-card>

  </div>

  <!-- ⭐️ SECCIÓN DE CATEGORÍAS (DINÁMICA Y CON INTERACCIÓN) -->
</ion-content>





<!-- <ion-header [translucent]="true">
  <ion-toolbar>
    <div class="header">
      <ion-title>GamePage</ion-title>
      <ion-avatar>
        <img alt="Silhouette of a person's head" src="https://ionicframework.com/docs/img/demos/avatar.svg" />
      </ion-avatar>
    </div>
    </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
   Banner de bienvenida 
  <div class="bienvenida">
    <h1>¡Bienvenido a GamePage!</h1>
    <p>Descubre Post's de Videojuegos</p>
  </div>

  <div class="juegos-grid">
    <ion-card class="juegos-card">
      <img alt="Silhouette of mountains" src="https://ionicframework.com/docs/img/demos/card-media.png" />
      <ion-card-header>
        <ion-card-title>Zelda: Breath of the Wild</ion-card-title>
        <ion-card-subtitle>⭐ 4.8/5</ion-card-subtitle>
      </ion-card-header>

      <ion-card-content>
        Here's a small text description for the card content. Nothing more, nothing less.
      </ion-card-content>
    </ion-card>

    <ion-card class="juegos-card">
      <img alt="Silhouette of mountains" src="https://ionicframework.com/docs/img/demos/card-media.png" />
      <ion-card-header>
        <ion-card-title>God of War</ion-card-title>
        <ion-card-subtitle>⭐ 4.7/5</ion-card-subtitle>
      </ion-card-header>

      <ion-card-content>
        Here's a small text description for the card content. Nothing more, nothing less.
      </ion-card-content>
    </ion-card>

    <ion-card class="juegos-card">
      <img alt="Silhouette of mountains" src="https://ionicframework.com/docs/img/demos/card-media.png" />
      <ion-card-header>
        <ion-card-title>Red Dead Redemption 2</ion-card-title>
        <ion-card-subtitle>⭐ 4.9/5</ion-card-subtitle>
      </ion-card-header>

      <ion-card-content>
        Here's a small text description for the card content. Nothing more, nothing less.
      </ion-card-content>
    </ion-card>

    <ion-card class="juegos-card">
      <img alt="Silhouette of mountains" src="https://ionicframework.com/docs/img/demos/card-media.png" />
      <ion-card-header>
        <ion-card-title>The Witcher 3</ion-card-title>
        <ion-card-subtitle>⭐ 4.8/5</ion-card-subtitle>
      </ion-card-header>

      <ion-card-content>
        Here's a small text description for the card content. Nothing more, nothing less.
      </ion-card-content>
    </ion-card>
  </div>

   Sección de categorías 
  <div class="categorias">
    <h2>Categorías Populares</h2>
    <div class="lista-categorias">
      <ion-chip color="primary">Acción</ion-chip>
      <ion-chip color="secondary">Aventura</ion-chip>
      <ion-chip color="tertiary">RPG</ion-chip>
      <ion-chip color="success">Deportes</ion-chip>
      <ion-chip color="warning">Estrategia</ion-chip>
      <ion-chip color="danger">Shooter</ion-chip>
    </div>
  </div>
</ion-content> -->